(this.webpackJsonptrees=this.webpackJsonptrees||[]).push([[0],{15:function(e,n,o){},17:function(e,n,o){"use strict";o.r(n);o(15);var a,i,t,d,r,s,l,h,c,m=o(0),w=o(10),u=o(11),p=o(12),v=o(13),f=o(14),g=function(e,n,o,a){var i=new m.k(e,n,o,6,1),t=new m.R({color:a}),d=new m.P(i,t);return d.receiveShadow=!0,d.castShadow=!0,d},b=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=new m.sb(e,16,16),i=new m.R({color:n,transparent:!0,opacity:o}),t=new m.P(a,i);return t.receiveShadow=!0,t.castShadow=!0,t},C=new w.a,S=new m.i,x=[2,10],y=[.75,.9],R={branchDensity:.2,branchShortenRatio:.75,flyAround:!0,hasLeaves:!0,height:20,leafSize:25,maxBranchAngle:95,minBranchLength:3,seed:8883,treeColour:3680024,leafColour:7039494,groundColour:5592364},F=function(){(t=new m.nb).background=new m.j(13426943),(d=new m.cb(30,window.innerWidth/window.innerHeight,1,5)).add(new m.eb(16777215)),d.position.set(0,1,5);var e=(new m.j).setHSL(.6,1,.6);!function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=new m.u(16777215,16777215,.3);if(a.color=e,a.groundColor.setHSL(.095,1,.75),a.position.set(0,50,0),n.add(a),o){var i=new m.v(a,10);n.add(i)}}(e,t),function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=new m.l(16777215,1);o.color.setHSL(.1,1,.95),o.position.set(-1,1.75,1),o.position.multiplyScalar(30),e.add(o),o.castShadow=!0,o.shadow.mapSize.width=2048,o.shadow.mapSize.height=2048;var a=50;if(o.shadow.camera.left=-a,o.shadow.camera.right=a,o.shadow.camera.top=a,o.shadow.camera.bottom=-a,o.shadow.camera.far=3500,o.shadow.bias=-1e-4,n){var i=new m.m(o,10);e.add(i)}}(t);var n=new m.db(1e4,1e4);c=new m.R({color:R.groundColour});var o=new m.P(n,c);o.position.y=-40,o.rotation.x=-Math.PI/2,o.receiveShadow=!0,t.add(o);var a={topColor:{value:new m.j(30719)},bottomColor:{value:new m.j(16777215)},offset:{value:33},exponent:{value:.6}};a.topColor.value.copy(e);var r=new m.sb(4e3,32,15),w=new m.ob({uniforms:a,vertexShader:"\n  varying vec3 vWorldPosition;\n  void main() {\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n    vWorldPosition = worldPosition.xyz;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }\n",fragmentShader:"\n  uniform vec3 topColor;\n  uniform vec3 bottomColor;\n  uniform float offset;\n  uniform float exponent;\n  varying vec3 vWorldPosition;\n  void main() {\n    float h = normalize( vWorldPosition + offset ).y;\n    gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );\n  }\n",side:m.b}),g=new m.P(r,w);t.add(g),function(){var e=new f.a,n={newSeed:function(){R.seed=m.N.randInt(0,1e4),z()}},o=e.add(n,"newSeed").name("Random Tree");o.domElement.parentElement&&(o.domElement.parentElement.id="new-seed-button");var a=e.addFolder("Tree");a.open();var i=e.addFolder("Leaves");i.open(),a.add(R,"seed").name("Seed").listen().onFinishChange(z),a.add(R,"height",10,30,5).name("Height").onFinishChange(z),a.add(R,"minBranchLength",x[0],x[1],1).name("Min. Branch Length").onFinishChange(z),a.add(R,"maxBranchAngle",30,180,5).name("Max. Angle").onFinishChange(z),a.add(R,"branchDensity",.1,.5,.1).name("Branch Density").onFinishChange(z),a.addColor(R,"treeColour").name("Colour").onFinishChange(z),i.add(R,"hasLeaves").name("Show?").onFinishChange(z),i.add(R,"leafSize",10,40,5).name("Size").onFinishChange(z),i.addColor(R,"leafColour").name("Colour").onFinishChange(z);var t=e.addFolder("World");t.add(R,"flyAround").name("Fly Around"),t.addColor(R,"groundColour").name("Ground Colour").onFinishChange((function(){c.color.setHex(R.groundColour)})),t.open()}(),(i=new m.Fb({antialias:1===window.devicePixelRatio,powerPreference:"high-performance"})).setSize(window.innerWidth,window.innerHeight),i.setPixelRatio(window.devicePixelRatio),i.outputEncoding=m.Gb,i.shadowMap.enabled=!0,document.body.appendChild(i.domElement),h=new v.a,document.body.appendChild(h.dom),(d=new m.cb(30,window.innerWidth/window.innerHeight,1,500)).position.set(0,100,200),s=new u.a(d,i.domElement),l=new p.a(d,i.domElement),t.add(l),l.addEventListener("mouseDown",(function(){s.enabled=!1})),l.addEventListener("mouseUp",(function(){s.enabled=!0})),z()},z=function(){m.N.seededRandom(R.seed),t.remove(a),a=new m.t,A(R.height,new m.Db(0,0,0),0,0,R.height/10),t.add(a),a.position.set(0,-40,0)},N=function e(){if(requestAnimationFrame(e),S.getElapsedTime(),R.flyAround){d.position.x=a.position.x+200*Math.cos(.4*S.elapsedTime),d.position.z=a.position.z+200*Math.sin(.4*S.elapsedTime),d.position.y=90+(a.position.y+35*Math.sin(.2*S.elapsedTime)),d.lookAt(a.position)}s.update(),h.update(),i.render(t,d)};function A(e,n,o,i){var t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e/20,d=.66*t,r=new m.t,s=new m.Db(0,1,0);if(r.position.set(n.x,n.y,n.z),e<R.minBranchLength)return P(r),void a.add(r);var l=(new m.j).setHex(R.treeColour).offsetHSL(0,m.N.seededRandom()/10,m.N.seededRandom()/8),h=g(d,t,e,l);r.add(h),a.add(r),h.position.y+=e/2,r.rotation.z=o,s.applyAxisAngle(new m.Db(0,0,1),o),r.rotation.y=i,s.applyAxisAngle(new m.Db(0,1,0),i),s.multiplyScalar(e);var c=n.clone().add(s),w=e>R.height/3,u=e===R.height;if(w){if(!u){var p=b(1.5*d,l);r.add(p)}}else u||(P(r),a.add(r));for(var v=L(),f=0;f<v;f++)o=m.N.degToRad(B(-R.maxBranchAngle,R.maxBranchAngle)),i=m.N.degToRad(B(-R.maxBranchAngle,R.maxBranchAngle)),A(e*m.N.mapLinear(R.minBranchLength,x[0],x[1],y[0],y[1]),c,o,i,d)}function L(){return m.N.seededRandom()<1-R.branchDensity?D(1,2):D(3,4)}function P(e){var n=R.leafSize*m.N.seededRandom(),o=m.N.degToRad(360*m.N.seededRandom()),a=m.N.degToRad(360*m.N.seededRandom()),i=(new m.j).setHex(R.leafColour).offsetHSL(m.N.seededRandom()/10,m.N.seededRandom()/10,m.N.seededRandom()/8);if(R.hasLeaves){var t=r.clone();t.rotation.setFromVector3(new m.Db(0,0,0));var d=(new m.d).setFromObject(t),s=d.getCenter(new m.Db),l=d.getSize(new m.Db);t.scale.set(n,n,n),d.setFromObject(t),d.getCenter(s),d.getSize(l),(new m.d).setFromObject(t).getCenter(t.position),t.position.add(new m.Db(0,0,l.z/2)),t.position.multiplyScalar(-1),t.position.copy(s).multiplyScalar(-1);var h=new m.t;h.add(t),t.position.z-=.45*l.z,t.position.x+=.0075*l.x,t.position.y+=.01*l.y,h.rotation.x=o,h.rotation.z=a,t.traverse((function(e){if(e){var n=new m.R({color:i});e.material=n,e.castShadow=!0,e.receiveShadow=!0}})),e.add(h)}}function D(e,n){return Math.floor(m.N.seededRandom()*(n-e+1)+e)}function B(e,n){return m.N.seededRandom()*(n-e)+e}C.load("assets/leaf/scene.gltf",(function(e){(r=e.scene.clone()).castShadow=!0,r.receiveShadow=!0,F(),N()}),void 0,(function(e){console.error(e)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.b561f3f3.chunk.js.map