(this.webpackJsonptrees=this.webpackJsonptrees||[]).push([[0],{15:function(e,n,o){},17:function(e,n,o){"use strict";o.r(n);o(15);var a,d,i,t,r,s,h,l,c,m=o(0),w=o(10),u=o(11),p=o(12),g=o(13),f=o(14),v=function(e,n,o,a){var d=new m.j(e,n,o,6,1),i=new m.Q({color:a}),t=new m.O(d,i);return t.receiveShadow=!0,t.castShadow=!0,t},S=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=new m.qb(e,16,16),d=new m.Q({color:n,transparent:!0,opacity:o}),i=new m.O(a,d);return i.receiveShadow=!0,i.castShadow=!0,i},b=new w.a,C=new m.h,y=[2,10],M=[.75,.9],x={branchDensity:.2,branchShortenRatio:.75,flyAround:!0,hasLeaves:!0,height:20,leafSize:25,maxBranchAngle:95,minBranchLength:3,seed:8883,treeColour:3680024,leafColour:7039494,groundColour:9013597},R=function(){(i=new m.mb).background=new m.i(13426943),function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=new m.t(16777215,16777215,.3);if(a.color=e,a.groundColor.setHSL(.095,1,.75),a.position.set(0,50,0),n.add(a),o){var d=new m.u(a,10);n.add(d)}}((new m.i).setHSL(.6,1,.6),i),function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=new m.k(16777215,1);o.color.setHSL(.1,1,.95),o.position.set(-1,1.75,1),o.position.multiplyScalar(30),e.add(o),o.castShadow=!0,o.shadow.mapSize.width=2048,o.shadow.mapSize.height=2048;var a=40;if(o.shadow.camera.left=-a,o.shadow.camera.right=a,o.shadow.camera.top=a,o.shadow.camera.bottom=-a,n){var d=new m.l(o,10);e.add(d)}}(i);var e=new m.cb(1e3,1e3);c=new m.Q({color:x.groundColour});var n=new m.O(e,c);n.position.y=-40,n.rotation.x=-Math.PI/2,n.receiveShadow=!0,i.add(n),function(){var e=new f.a,n={newSeed:function(){x.seed=m.M.randInt(0,1e4),B()}},o=e.add(n,"newSeed").name("Random Tree");o.domElement.parentElement&&(o.domElement.parentElement.id="new-seed-button");var a=e.addFolder("Tree");a.open();var d=e.addFolder("Leaves");d.open(),a.add(x,"seed").name("Seed").listen().onFinishChange(B),a.add(x,"height",10,30,5).name("Height").onFinishChange(B),a.add(x,"minBranchLength",y[0],y[1],1).name("Min. Branch Length").onFinishChange(B),a.add(x,"maxBranchAngle",30,180,5).name("Max. Angle").onFinishChange(B),a.add(x,"branchDensity",.1,.5,.1).name("Branch Density").onFinishChange(B),a.addColor(x,"treeColour").name("Colour").onFinishChange(B),d.add(x,"hasLeaves").name("Show?").onFinishChange(B),d.add(x,"leafSize",10,40,5).name("Size").onFinishChange(B),d.addColor(x,"leafColour").name("Colour").onFinishChange(B);var i=e.addFolder("World");i.add(x,"flyAround").name("Fly Around"),i.addColor(x,"groundColour").name("Ground Colour").onFinishChange((function(){c.color.setHex(x.groundColour)})),i.open()}(),(d=new m.Db({antialias:1===window.devicePixelRatio,powerPreference:"high-performance"})).setSize(window.innerWidth,window.innerHeight),d.setPixelRatio(window.devicePixelRatio),d.outputEncoding=m.Eb,d.shadowMap.enabled=!0,document.body.appendChild(d.domElement),l=new g.a,document.body.appendChild(l.dom),(t=new m.bb(30,window.innerWidth/window.innerHeight,1,500)).position.set(0,100,200),s=new u.a(t,d.domElement),h=new p.a(t,d.domElement),i.add(h),h.addEventListener("mouseDown",(function(){s.enabled=!1})),h.addEventListener("mouseUp",(function(){s.enabled=!0})),B()},B=function(){m.M.seededRandom(x.seed),i.remove(a),a=new m.s,z(x.height,new m.Bb(0,0,0),0,0,x.height/10),i.add(a),a.position.set(0,-40,0)},F=function e(){if(requestAnimationFrame(e),C.getElapsedTime(),x.flyAround){t.position.x=a.position.x+200*Math.cos(.4*C.elapsedTime),t.position.z=a.position.z+200*Math.sin(.4*C.elapsedTime),t.position.y=90+(a.position.y+35*Math.sin(.2*C.elapsedTime)),t.lookAt(a.position)}s.update(),l.update(),d.render(i,t)};function z(e,n,o,d){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e/20,t=.66*i,r=new m.s,s=new m.Bb(0,1,0);if(r.position.set(n.x,n.y,n.z),e<x.minBranchLength)return L(r),void a.add(r);var h=(new m.i).setHex(x.treeColour).offsetHSL(0,m.M.seededRandom()/10,m.M.seededRandom()/8),l=v(t,i,e,h);r.add(l),a.add(r),l.position.y+=e/2,r.rotation.z=o,s.applyAxisAngle(new m.Bb(0,0,1),o),r.rotation.y=d,s.applyAxisAngle(new m.Bb(0,1,0),d),s.multiplyScalar(e);var c=n.clone().add(s),w=e>x.height/3,u=e===x.height;if(w){if(!u){var p=S(1.5*t,h);r.add(p)}}else u||(L(r),a.add(r));for(var g=A(),f=0;f<g;f++)o=m.M.degToRad(H(-x.maxBranchAngle,x.maxBranchAngle)),d=m.M.degToRad(H(-x.maxBranchAngle,x.maxBranchAngle)),z(e*m.M.mapLinear(x.minBranchLength,y[0],y[1],M[0],M[1]),c,o,d,t)}function A(){return m.M.seededRandom()<1-x.branchDensity?E(1,2):E(3,4)}function L(e){var n=x.leafSize*m.M.seededRandom(),o=m.M.degToRad(360*m.M.seededRandom()),a=m.M.degToRad(360*m.M.seededRandom()),d=(new m.i).setHex(x.leafColour).offsetHSL(m.M.seededRandom()/10,m.M.seededRandom()/10,m.M.seededRandom()/8);if(x.hasLeaves){var i=r.clone();i.rotation.setFromVector3(new m.Bb(0,0,0));var t=(new m.c).setFromObject(i),s=t.getCenter(new m.Bb),h=t.getSize(new m.Bb);i.scale.set(n,n,n),t.setFromObject(i),t.getCenter(s),t.getSize(h),(new m.c).setFromObject(i).getCenter(i.position),i.position.add(new m.Bb(0,0,h.z/2)),i.position.multiplyScalar(-1),i.position.copy(s).multiplyScalar(-1);var l=new m.s;l.add(i),i.position.z-=.45*h.z,i.position.x+=.0075*h.x,i.position.y+=.01*h.y,l.rotation.x=o,l.rotation.z=a,i.traverse((function(e){if(e){var n=new m.Q({color:d});e.material=n,e.castShadow=!0,e.receiveShadow=!0}})),e.add(l)}}function E(e,n){return Math.floor(m.M.seededRandom()*(n-e+1)+e)}function H(e,n){return m.M.seededRandom()*(n-e)+e}b.load("assets/leaf/scene.gltf",(function(e){(r=e.scene.clone()).castShadow=!0,r.receiveShadow=!0,R(),F()}),void 0,(function(e){console.error(e)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.20398a82.chunk.js.map