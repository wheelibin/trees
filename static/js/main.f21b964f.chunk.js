(this.webpackJsonptrees=this.webpackJsonptrees||[]).push([[0],{16:function(e,n,o){},18:function(e,n,o){"use strict";o.r(n);o(16);var a,t,i,d,r,s,h,c,l,w=o(8),m=o.n(w),u=o(9),p=o(0),g=o(11),f=o(12),v=o(13),b=o(14),C=o(15),S=function(e,n,o,a){var t=new p.j(e,n,o,6,1),i=new p.Q({color:a}),d=new p.O(t,i);return d.receiveShadow=!0,d.castShadow=!0,d},y=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=new p.qb(e,16,16),t=new p.Q({color:n,transparent:!0,opacity:o}),i=new p.O(a,t);return i.receiveShadow=!0,i.castShadow=!0,i},M=new g.a,x=new p.h,R=[2,10],B=[.75,.9],F={branchDensity:.2,branchShortenRatio:.75,flyAround:!0,hasLeaves:!0,height:20,leafSize:25,maxBranchAngle:95,minBranchLength:3,seed:8708,treeColour:3680024,leafColour:7039494,groundColour:9013597},A=function(){var e=Object(u.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.loadAsync("assets/leaf/scene.gltf");case 2:n=e.sent,(r=n.scene.clone()).castShadow=!0,r.receiveShadow=!0,L(),E();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){(i=new p.mb).background=new p.i(13426943),function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=new p.t(16777215,16777215,.3);if(a.color=e,a.groundColor.setHSL(.095,1,.75),a.position.set(0,50,0),n.add(a),o){var t=new p.u(a,10);n.add(t)}}((new p.i).setHSL(.6,1,.6),i),function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=new p.k(16777215,1);o.color.setHSL(.1,1,.95),o.position.set(-1,1.75,1),o.position.multiplyScalar(30),e.add(o),o.castShadow=!0,o.shadow.mapSize.width=2048,o.shadow.mapSize.height=2048;var a=40;if(o.shadow.camera.left=-a,o.shadow.camera.right=a,o.shadow.camera.top=a,o.shadow.camera.bottom=-a,n){var t=new p.l(o,10);e.add(t)}}(i);var e=new p.cb(1e3,1e3);l=new p.Q({color:F.groundColour});var n=new p.O(e,l);n.position.y=-40,n.rotation.x=-Math.PI/2,n.receiveShadow=!0,i.add(n),function(){var e=new C.a,n={newSeed:function(){F.seed=p.M.randInt(0,1e4),z()}},o=e.add(n,"newSeed").name("Random Tree");o.domElement.parentElement&&(o.domElement.parentElement.id="new-seed-button");var a=e.addFolder("Tree");a.open();var t=e.addFolder("Leaves");t.open(),a.add(F,"seed").name("Seed").listen().onFinishChange(z),a.add(F,"height",10,30,5).name("Height").onFinishChange(z),a.add(F,"minBranchLength",R[0],R[1],1).name("Min. Branch Length").onFinishChange(z),a.add(F,"maxBranchAngle",30,180,5).name("Max. Angle").onFinishChange(z),a.add(F,"branchDensity",.1,.5,.1).name("Branch Density").onFinishChange(z),a.addColor(F,"treeColour").name("Colour").onFinishChange(z),t.add(F,"hasLeaves").name("Show?").onFinishChange(z),t.add(F,"leafSize",10,40,5).name("Size").onFinishChange(z),t.addColor(F,"leafColour").name("Colour").onFinishChange(z);var i=e.addFolder("World");i.add(F,"flyAround").name("Fly Around"),i.addColor(F,"groundColour").name("Ground Colour").onFinishChange((function(){l.color.setHex(F.groundColour)})),i.open()}(),(t=new p.Db({antialias:1===window.devicePixelRatio,powerPreference:"high-performance"})).setSize(window.innerWidth,window.innerHeight),t.setPixelRatio(window.devicePixelRatio),t.outputEncoding=p.Eb,t.shadowMap.enabled=!0,document.body.appendChild(t.domElement),c=new b.a,document.body.appendChild(c.dom),(d=new p.bb(30,window.innerWidth/window.innerHeight,1,500)).position.set(0,100,200),s=new f.a(d,t.domElement),h=new v.a(d,t.domElement),i.add(h),h.addEventListener("mouseDown",(function(){s.enabled=!1})),h.addEventListener("mouseUp",(function(){s.enabled=!0})),window.addEventListener("keydown",(function(e){switch(e.key.toUpperCase()){case"R":h.setMode("rotate");break;case"V":h.setMode("translate")}})),z()},z=function(){p.M.seededRandom(F.seed),i.remove(a),a=new p.s,H(F.height,new p.Bb(0,0,0),0,0,F.height/10),i.add(a),a.position.set(0,-40,0)},E=function e(){if(requestAnimationFrame(e),x.getElapsedTime(),F.flyAround){d.position.x=a.position.x+200*Math.cos(.4*x.elapsedTime),d.position.z=a.position.z+200*Math.sin(.4*x.elapsedTime),d.position.y=90+(a.position.y+35*Math.sin(.2*x.elapsedTime)),d.lookAt(a.position)}s.update(),c.update(),t.render(i,d)};function H(e,n,o,t){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e/20,d=.66*i,r=new p.s,s=new p.Bb(0,1,0);if(r.position.set(n.x,n.y,n.z),e<F.minBranchLength)return k(r),void a.add(r);var h=(new p.i).setHex(F.treeColour).offsetHSL(0,p.M.seededRandom()/10,p.M.seededRandom()/8),c=S(d,i,e,h);r.add(c),a.add(r),c.position.y+=e/2,r.rotation.z=o,s.applyAxisAngle(new p.Bb(0,0,1),o),r.rotation.y=t,s.applyAxisAngle(new p.Bb(0,1,0),t),s.multiplyScalar(e);var l=n.clone().add(s),w=e>F.height/3,m=e===F.height;if(w){if(!m){var u=y(1.5*d,h);r.add(u)}}else m||(k(r),a.add(r));for(var g=T(),f=0;f<g;f++)o=p.M.degToRad(D(-F.maxBranchAngle,F.maxBranchAngle)),t=p.M.degToRad(D(-F.maxBranchAngle,F.maxBranchAngle)),H(e*p.M.mapLinear(F.minBranchLength,R[0],R[1],B[0],B[1]),l,o,t,d)}function T(){return p.M.seededRandom()<1-F.branchDensity?O(1,2):O(3,4)}function k(e){var n=F.leafSize*p.M.seededRandom(),o=p.M.degToRad(360*p.M.seededRandom()),a=p.M.degToRad(360*p.M.seededRandom()),t=(new p.i).setHex(F.leafColour).offsetHSL(p.M.seededRandom()/10,p.M.seededRandom()/10,p.M.seededRandom()/8);if(F.hasLeaves){var i=r.clone();i.rotation.setFromVector3(new p.Bb(0,0,0));var d=(new p.c).setFromObject(i),s=d.getCenter(new p.Bb),h=d.getSize(new p.Bb);i.scale.set(n,n,n),d.setFromObject(i),d.getCenter(s),d.getSize(h),(new p.c).setFromObject(i).getCenter(i.position),i.position.add(new p.Bb(0,0,h.z/2)),i.position.multiplyScalar(-1),i.position.copy(s).multiplyScalar(-1);var c=new p.s;c.add(i),i.position.z-=.45*h.z,i.position.x+=.0075*h.x,i.position.y+=.01*h.y,c.rotation.x=o,c.rotation.z=a,i.traverse((function(e){if(e){var n=new p.Q({color:t});e.material=n,e.castShadow=!0,e.receiveShadow=!0}})),e.add(c)}}function O(e,n){return Math.floor(p.M.seededRandom()*(n-e+1)+e)}function D(e,n){return p.M.seededRandom()*(n-e)+e}A()}},[[18,1,2]]]);
//# sourceMappingURL=main.f21b964f.chunk.js.map